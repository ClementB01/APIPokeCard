{"ast":null,"code":"var _jsxFileName = \"/Users/lpiem/react/tictactoes/src/App.tsx\";\nimport React from \"react\";\nimport \"./App.css\";\nimport Game from \"./Game\";\nconst initialGame = [[null, null, null], [null, null, null], [null, null, null]];\n\nconst isFirstPlayerTurn = game => {\n  const emptyCells = game.reduce((acc, row) => acc.concat(row), []).filter(cell => cell === null);\n  return emptyCells.length % 2 !== 0;\n};\n\nconst getWinner = game => {\n  const getOwner = line => line.every(cell => cell === line[0]) ? line[0] : null;\n\n  const columns = game.map((_, y) => game.map((_, x) => game[x][y]));\n  const diagonals = [game.map((_, y) => game[y][y]), game.map((_, y) => game[y][2 - y])];\n  const lines = [...game, ...columns, ...diagonals];\n  return lines.reduce((winner, line) => winner || getOwner(line), null);\n};\n\nconst play = (game, x, y) => {\n  if (!getWinner(game) && !game[x][y]) {\n    game[x][y] = isFirstPlayerTurn(game) ? 1 : 2;\n    ReactDOM.render(createGame(game), document.getElementById('root'));\n  }\n};\n\nconst reinitGame = game => {\n  game.map((row, x) => row.map((cell, y) => game[x][y] = null));\n  ReactDOM.render(createGame(game), document.getElementById('root'));\n}; //Le boutton reset ne fonction pas\n\n\nfunction createGame(game) {\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"header\", {\n    className: \"App-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(App, {\n    onClick: () => {},\n    appGame: game,\n    winner: getWinner(game),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }), React.createElement(ButtonRestart, {\n    onClick: () => {},\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  })));\n}\n\nconst App = appProps => {\n  return React.createElement(Game, {\n    game: appProps.appGame,\n    onClick: () => {},\n    winner: appProps.winner,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  });\n};\n\nexport default App;","map":{"version":3,"sources":["/Users/lpiem/react/tictactoes/src/App.tsx"],"names":["React","Game","initialGame","isFirstPlayerTurn","game","emptyCells","reduce","acc","row","concat","filter","cell","length","getWinner","getOwner","line","every","columns","map","_","y","x","diagonals","lines","winner","play","ReactDOM","render","createGame","document","getElementById","reinitGame","App","appProps","appGame"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./App.css\";\nimport Game, { GameProps } from \"./Game\";\n\ntype Cell = 1 | 2 | null;\ntype Winner = Cell\ntype Owner = Cell\ntype Row = Cell[];\ntype Line = Row;\ntype Game = Row[];\n\nconst initialGame: Game = [\n    [null, null, null],\n    [null, null, null],\n    [null, null, null],\n];\n\n\nconst isFirstPlayerTurn = (game: Game): boolean => {\n    const emptyCells = game\n        .reduce<Cell[]>((acc, row) => acc.concat(row), [])\n        .filter(cell => cell === null);\n\n    return emptyCells.length % 2 !== 0;\n};\n\nconst getWinner = (game: Game): Winner => {\n    const getOwner = (line: Line): Owner =>\n    line.every(cell => cell === line[0]) ? line[0] : null;\n\n    const columns = game.map((_, y) => game.map((_, x) => game[x][y]));\n    const diagonals = [\n    game.map((_, y) => game[y][y]),\n    game.map((_, y) => game[y][2 - y])\n    ];\n    const lines = [...game, ...columns, ...diagonals];\n\n    return lines.reduce<Owner>((winner, line) => winner || getOwner(line), null);\n};\n\nconst play = (game: Game, x: number, y: number) => {\n    if (!getWinner(game) && !game[x][y]) {\n    game[x][y] = isFirstPlayerTurn(game) ? 1 : 2;\n    ReactDOM.render(createGame(game), document.getElementById('root'));\n    }\n};\n\nconst reinitGame = (game: Game) => {\n    game.map((row, x) => row.map((cell, y) => game[x][y] = null))\n    ReactDOM.render(createGame(game), document.getElementById('root'));\n }\n\n//Le boutton reset ne fonction pas\nfunction createGame(game: Game) {\n    return(\n        <div className=\"App\">\n            <header className=\"App-header\">\n                <App onClick={() => {}} appGame={game} winner={getWinner(game)}/>\n                <ButtonRestart onClick={() => {}}/>\n            </header>\n        </div>\n    );\n    \n}\n\ntype AppProps = {\n  onClick: GameProps[\"onClick\"];\n  appGame: GameProps[\"game\"];\n  winner: Winner;\n};\n\nconst App: React.FC<AppProps> = appProps => {\n    return (\n        <Game game={appProps.appGame} onClick={() => {}} \n          winner={appProps.winner}></Game>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}